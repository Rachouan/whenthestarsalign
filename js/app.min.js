window.onload=function(){function e(){F.log("De pagina is ingeladen"),function(){if(!document.createElement("canvas").getContext)return F.log("Something went wrong :(!"),!1;p=document.getElementById("cnvs"),g=p.getContext("2d"),p.width=v,p.height=m,_.centerX=p.width/2,_.centerY=p.height/2.8,_.radius=p.width-2*_.padding,new h("Neptune","images/planets/neptune.svg","planet"),new h("Uranus","images/planets/uranus.svg","planet"),new h("Saturn","images/planets/saturn.svg","planet"),new h("Jupiter","images/planets/jupiter.svg","planet"),new h("Belt","","belt"),new h("Mars","images/planets/mars.svg","planet"),new h("Earth","images/planets/earth.svg","planet"),new h("Venus","images/planets/venus.svg","planet"),new h("Mercury","images/planets/mercury.svg","planet"),new h("Sun","images/planets/sun.svg","sun"),b=$("input[name=color]:checked").data("varient"),$("#day,#month,#year").on("change",function(e){o(),updateDate_T6(f),run_T6(),l()}),$("#Color").val(k),$("#message").on("keyup",function(e){R=$(this).val(),$("#save-message").val(R),$(this).removeClass("small"),$(this).val().length>25&&$(this).addClass("small"),l(),$("#Text").val(R)}),$("input,textarea").on("blur",function(){$("input,textarea").each(function(e,t){var a=$(t).parent().find("label");$(t).attr("placeholder",$(t).data("placeholder")),$(a).removeClass("open")})}),$(".email-popup #emailoptin").on("keyup",function(){$("#save-email").val($(this).val())}),$("input,textarea").on("focus",function(e){$(this).attr("placeholder","");$(this).parent().find("label").addClass("open")}),$("#date").on("change",function(e){$("#NewDate").val(new Date($(this).val())),updateDate_T6(new Date($(this).val())),run_T6(),l()}),$("input[name=color].color").on("change",function(e){n(),l(),r(w,b)}),$("input[name=print].print").on("change",function(e){x=$("input[name=print]:checked").val(),console.log(x),l(),r(w,b)}),$("#email-optin").on("submit",function(e){e.preventDefault(),!function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(Y=$("#emailoptin").val())?$("#emailoptin").addClass("error"):(L=!0,t())}),$(".checkout").on("click",function(e){e.preventDefault(),L=!1,E?a():t()}),$(".download").on("click",function(e){if(e.preventDefault(),!E)return $(".email-popup").addClass("open"),!1;t()}),$(".buttons-mobile .button").on("click",function(e){switch(e.preventDefault(),$(this).attr("class")){case"button prev":A--;break;case"button next":A++}A<1&&(A=1),A>$(".editor .slide").length&&(A=$(".editor fieldset").length),s()}),$(window).on("resize",function(e){s()}),function(){var e=$("#save-message");e.val().length>0&&(R=e.val(),$("#message").val(R))}(),function(){var e=$("#save-color").val(),t=$("input[name=color].color").get(e);$(t).attr("checked",!0),n()}(),o(),updateDate_T6(f),s(),run_T6(),l()}()}function t(){if(N.length<1){c(!0);var e=p.toDataURL("image/png");document.getElementById("hidden_data").value=e;var t=new FormData(document.forms["upload-form"]),n=new XMLHttpRequest;n.open("POST",y+$("form[name=upload-form]").attr("action"),!0),n.upload.onprogress=function(e){if(c(!0),e.lengthComputable){var t=e.loaded/e.total*100;$(".preloader .precentage").html(Math.round(t)+"%")}},n.onload=function(e){var t=e.srcElement.response;N=t,$("#Code").val(N),c(!1),N&&(E=!0),L?N&&($(".email-popup .popup").addClass("success"),function(e,t){console.log("An email has been sent to "+e+" with design code"+t)}(Y,N),L=!1):E&&a()},n.send(t)}else a()}function a(){$("#checkout").submit()}function n(){k=$("input[name=color].color:checked").val(),b=T[x][k],$("#Color").val(k),$("#save-color").val(k),M=k>3,D=1==k}function o(){f=new Date($("#month").find(":selected").text()+"-"+$("#day").find(":selected").text()+"-"+$("#year").find(":selected").text()),$("#date").val()!=$("#save-date").val()&&(f=new Date($("#save-date").val()));var e=("0"+f.getDate()).slice(-2),t=("0"+(f.getMonth()+1)).slice(-2);$("#day option").filter(function(){return $(this).html()==e}).attr("selected","selected");var a=$("#month option").get(f.getMonth());$(a).attr("selected","selected"),$("#year option").filter(function(){return $(this).html()==f.getFullYear()}).attr("selected","selected");var n=f.getFullYear()+"-"+t+"-"+e;$("#date").val(n),$("#save-date").val(n),$("#NewDate").val(n)}function r(e,t){$("#checkout").attr("action",e+t)}function s(){$(".buttons-mobile #download").hide(),A<=1?$(".buttons-mobile .prev").hide():A>=$(".editor .slide").length?($(".buttons-mobile #download").show(),$(".buttons-mobile .next").hide()):($(".buttons-mobile .prev").show(),$(".buttons-mobile .next").show());var e=$(".editor .slide:nth-child("+A+")").position().left;$(".wrapper").css({left:"-"+e+"px"})}function l(){C=0,X=0,I=0,g.fillStyle=S[k],g.fillRect(0,0,p.width,p.height),g.textAlign="center";for(var e in P)P[e].draw();!function(){var e=function(e){return e.replace(/(.{1,50})(?:\n|$| )/g,"$1\n")}(R);M?(u(g,"SOLAR SYSTEM CONSTELLATION ON",_.centerX,p.height-p.height/5,"#000000",0,"Roboto Slab",30,20),u(g,d(new Date($("#date").val())),_.centerX,p.height-p.height/5.7,"#000000",0,"Roboto Slab",50,20),u(g,e,_.centerX,p.height-p.height/6+100,"#000000",0,"Roboto Slab",50,10)):(u(g,"SOLAR SYSTEM CONSTELLATION ON",_.centerX,p.height-p.height/5,"#ffffff",0,"Roboto Slab",30,20),u(g,d(new Date($("#date").val())),_.centerX,p.height-p.height/5.7,"#ffffff",0,"Roboto Slab",50,20),u(g,e,_.centerX,p.height-p.height/6+100,"#ffffff",0,"Roboto Slab",50,10))}()}function c(e){$(".preloader").removeClass("show"),e&&$(".preloader").addClass("show")}function h(e,t,a){P[++O]=this,this.image=t,this.name=e,this.type=a,this.angle=0,this.radius=_.radius/2-_.orbitPadding*O,this.x=_.centerX+this.radius*Math.cos(this.angle),this.y=_.centerY-this.radius*Math.sin(this.angle),this.id=O}function u(e,t,a,n,o,r,s,l,c){var h=t.split("\n");for(r||(r=0),s||(s="'serif'"),l||(l=16),o||(o="#000000"),e.save(),e.font=l+"px "+s,e.fillStyle=o,e.rotate(r*Math.PI/180),e.translate(a,n),i=0;i<h.length;i++)e.fillText(h[i],0,80*i);e.restore()}function d(e){var t=e.getDate()+1,a=e.getMonth(),n=e.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+t+", "+n}Date.now();var p,g,f,v=3150,m=4050,b=7365509644349,w="https://whenthestarsalign.com/cart/add/",y="",x=0,T=[["7365509644349","7433775153213","7433775218749","7433775284285","7433775153213"],["7591346012221","7591346044989","7591346077757","7591346110525","7591346143293"]],S=["#000000","#000000","#F38181","#71C9CE","#ffffff"],k=0,M=!1,D=!1,C=0,X=0,I=0,R="",E=!1,L=!1,N="",Y="",A=1,P={},O=0,_={padding:200,orbitPadding:100,astroids:150,radius:0,centerX:0,centerY:0},F=function(){};F.log=function(e){try{console.log(e)}catch(e){return}},h.prototype.draw=function(){var e=!0,t=!0,a=!1;switch(this.type){case"planet":e=!0,t=!0,C++;break;case"sun":e=!1,t=!0,a=!0;break;case"belt":e=!1,t=!1}var n;switch(this.name.toLowerCase()){case"neptune":n={x:T6.xNeptune,y:T6.yNeptune};break;case"uranus":n={x:T6.xUranus,y:T6.yUranus};break;case"saturn":n={x:T6.xSaturn,y:T6.ySaturn};break;case"mars":n={x:T6.xMars,y:T6.yMars};break;case"venus":n={x:T6.xVenus,y:T6.yVenus};break;case"jupiter":n={x:T6.xJupiter,y:T6.yJupiter};break;case"mercury":n={x:T6.xMercury,y:T6.yMercury};break;case"earth":n={x:T6.xEarth,y:T6.yEarth}}null!=n&&(this.x=_.centerX+n.x*this.radius,this.y=_.centerY+n.y*this.radius),e&&(g.beginPath(),g.arc(_.centerX,_.centerY,this.radius,0,2*Math.PI,!1),g.lineWidth=4,g.setLineDash([5,15]),g.strokeStyle=M?"rgba(0, 0, 0, .2)":"rgba(255, 255, 255, .7)",g.stroke());var i=this.radius;if(!e&&!t){var o=new Image;o.onload=function(){for(var e=2*Math.PI/_.astroids,t=_.centerX,a=_.centerY,n=i,r=.01;r<2*Math.PI;r+=e){var s=t+(n=i)*Math.cos(r),l=a-n*Math.sin(r);g.save(),g.translate(s,l),g.globalAlpha=.5,g.rotate(360*Math.random()*Math.PI/180),g.drawImage(o,-o.width/2,-o.height/2),g.restore()}};h=M?"black":"white";o.src=y+"images/planetsv2/"+h+"/astroid.png"}if(t){var r=this.x,s=this.y;a&&(r=_.centerX,s=_.centerY);var l=new Image,c=this.name;l.onload=function(){if(g.beginPath(),g.fillStyle=S[k],g.arc(r,s,l.width/2,0,2*Math.PI,!1),g.fill(),g.drawImage(l,r-l.width/2,s-l.height/2),!a){var e=_.centerX+(_.radius/2-_.padding),t=_.centerX-(_.radius/2-_.padding),n=t+(e-t)/(C-1)*X;X++;var i=p.height-p.height/3.7;M?u(g,c,n,i-130,"#000000",0,"Roboto Slab",30):u(g,c,n,i-130,"#ffffff",0,"Roboto Slab",30),g.drawImage(l,n-l.width/2,i-l.height/2)}};var h="white";M?h="black":D&&(h="color"),l.src=y+"images/planetsv2/"+h+"/"+this.name.toLowerCase()+".png"}},e()};